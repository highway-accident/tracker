{% extends '::base.html.twig' %}

{% block content %}
    <div class="search tabbable">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#basic" data-toggle="tab">Поиск</a></li>
            <li><a href="#advanced" data-toggle="tab">Расширенный поиск</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane active" id="basic">
                <form action="{{ path('torrents') }}#tab#basic" method="GET" class="well form-search">
                        {{ form_widget(filter_form.title) }}
                        {{ form_widget(filter_form.status) }}
                        <input type="hidden" name="type" value="basic" />
                        <button type="submit" class="btn btn-primary">Искать</button>
                        <button type="reset" class="btn">Сброс</button>
                    
                </form>
            </div>
            <div class="tab-pane" id="advanced">
                <form action="{{ path('torrents') }}#tab#advanced" method="GET" class="form-horizontal advanced_search">
                    <div class="clearfix">
                        <div class="control-group">
                            <label class="control-label" for="input01">Название:</label>

                            <div class="controls">
                                {{ form_widget(advanced_filter_form.title) }}
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label" for="input01">Статус:</label>

                            <div class="controls">
                                {{ form_widget(advanced_filter_form.status) }}
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="control-label" for="input01">Размер:</label>

                            <div class="controls">
                                <div style="display: none">
                                    {{ form_widget(advanced_filter_form.size_min) }}
                                    {{ form_widget(advanced_filter_form.size_max) }}
                                </div>
                                <div id="size_slider" class="input-xlarge"></div>
                                <p class="help-block">От <span id="size_from"></span> до <span id="size_to"></span></p>
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <label class="control-label" for="input01">Категория:</label>

                            <div class="controls">
                                {{ form_widget(advanced_filter_form.type) }}
                            </div>
                        </div>

                        <div class="advanced_search__movie_fields">
                            <div class="control-group">
                                <label class="control-label" for="input01">Режиссёр:</label>

                                <div class="controls">
                                    {{ form_widget(advanced_filter_form.director) }}
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label" for="input01">Минимальное качество:</label>

                                <div class="controls">
                                    {{ form_widget(advanced_filter_form.min_quality) }}
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Искать</button>
                        <button type="reset" class="btn">Сброс</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <table class="table table-striped table-bordered">
        <tr>
            <th>Тип</th>
            <th>Название</th>
            <th>Скачать</th>
            <th>Размер</th>
            <th>Сидеров</th>
            <th>Личеров</th>
            <th>Добавил</th>
        </tr>
    {% for torrent in entities %}
        <tr>
            <td>Тип</td>
            <td><a href="{{ path('torrent_show', {'id': torrent.torrent.id}) }}">{{ torrent.torrent.title }} / {{ torrent.torrent.titleOriginal }}</a></td>
            <td><a href="{{ path('torrent_download', {'id': torrent.torrent.id}) }}"><i class="icon-download-alt"></i></a></td>
            <td>{{ torrent.torrent.size|filesize }}</td>
            <td>0</td>
            <td>0</td>
            <td>{{ torrent.torrent.addedBy.username }}</td>
        </tr>
    {% endfor %}
    </table>
{% endblock content %}